---
title: cdn学习
date: 2018-05-14 11:30:21
tags: 学习
---
## CDN的全称是Content Delivery Network，即内容分发网络


其基本思路是尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快、更稳定。

通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。其目的是使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度。

<!-- more -->

### 优势

* 成本：同等的流量带宽，价格会比自己采购机房的价格便宜很多。
* 速度：让用户可以就近取得所需内容。
* 可靠性： CDN能几乎涵盖国内所有线路。而在可靠性上， CDN 在结构上实现了多点的冗余，即使某一个节点由于意外发生故障，对网站的访问能够被自动导向其他的健康节点进行响应
* CDN能轻松实现网站的全国铺设，不必考虑服务器的投入与托管、不必考虑新增带宽的成本、不必考虑多台服务器的镜像同步、不必考虑更多的管理维护技术人员。


### CDN = 更智能的镜像+缓存+流量导流

* 网站镜像：将一个完全相同的站点放到几个服务器，分别有自己的URL，在这些服务器上互为镜像网站。（优点：当一个网站的流量过高，服务器不能承受的时候，那么这时候就能起到给服务器减压分流的作用。缺点：容易被搜索引擎识别为作弊手法，导致自己的站点受到影响。来回的切换比较麻烦。一旦自己的网站被镜像，网站的品牌形象就会受损。内容更新复杂，要分别推送。并且要手动选择所访问的镜像）适用：大型网站进行分流，小型网站可不必使用如此方法。
* 缓存：CND不是将内容copy，而是将内容缓存，可以放在内存或者文件里面保存一段时间，在做过期的跟新和手动的推送。
* 流量导流：全国用户可以访问离自己最近的cdn的节点。帮助用户更快的访问网站的速度，让内容响应速度更快。


### CDN加速原理

* 内容缓存	
	* squid作为web服务请求过来之后查看缓存是否有数据，如果有直接返回，如果没有或者过期，则去原站抓取过来缓存上然后传给用户
 	
* 内容缓存在内存或者本地文件中
	* 将频繁访问或者频繁跟新的放在内存中，相对较低的放在本地文件中
		
* 分布在全国各地的网络节点
	* 世纪互联，思必达，蓝汛，迅雷，星域（流量的共享模式：个人用户在流量富裕的时候将自己的带宽共享出去。）
* 多线路支持
	* 同时支持电信，联通，移动等线路。减少跨网访问


### 主要特点

1、本地Cache加速 提高了企业站点(尤其含有大量图片和静态页面站点)的访问速度，并大大提高以上性质站点的稳定性

2、镜像服务 消除了不同运营商之间互联的瓶颈造成的影响，实现了跨运营商的网络加速，保证不同网络中的用户都能得到良好的访问质量。

3、远程加速 远程访问用户根据DNS负载均衡技术智能自动选择Cache服务器，选择最快的Cache服务器，加快远程访问的速度

4、带宽优化 自动生成服务器的远程Mirror（镜像）cache服务器，远程用户访问时从cache服务器上读取数据，减少远程访问的带宽、分担网络流量、减轻原站点WEB服务器负载等功能。

5、集群抗攻击 广泛分布的CDN节点加上节点之间的智能冗余机制，可以有效地预防黑客入侵以及降低各种D.D.o.S攻击对网站的影响，同时保证较好的服务质量

6 ， 负载均衡技术：载均衡技术将网络的流量尽可能均匀地分配到几个能完成相同任务的服务器或网络节点上进行处理，避免部分网络节点过载而另一部分节点空闲的不利状况，既可以提高网络流量，又可以提高网络的整体性能。 

### 使用范围

* 静态和更新频率低的内容更适用
* 数据流量大的产品更适用

### CDN具体使用 (仅列举)
* DNS解析（把dns解析放在cdn服务的dns解析的服务中去，cdn服务中就有管理后台，我们就可以配置）
* 域名列表：使用服务时候的各种不同子级域名
* 文件刷新：不同内容的刷新时间设置，也可手动刷新
* 文件预缓存：把预缓存的内容推送到所有的cdn服务器
* 目录刷新：和文件刷新相似，只是范围更广
* 证书管理：https需要的安全证书等
* 数据分析：看到网站的访问流量等
* 命中率：看请求的内容是否cdn中已有缓存，如果有，就命中了，没有就没命中
* 用户中心：我们采购服务会对我们进行认证
